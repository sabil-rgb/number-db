<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Number Manager</title>

<style>
body{
  margin:0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#020617;
  font-family:Arial;
  color:white;
}
.card{
  background:#0b1220;
  padding:24px;
  border-radius:14px;
  width:90%;
  max-width:420px;
}
.label{
  background:#020617;
  padding:10px;
  border-radius:8px;
  margin-bottom:10px;
  text-align:center;
  font-weight:bold;
}
input,button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border:none;
  border-radius:8px;
}
button{background:#3b82f6;color:white}
.list{margin-top:14px}
.item{
  background:#020617;
  padding:8px;
  border-radius:6px;
  margin-bottom:6px
}
</style>
</head>
<body>

<!-- LOGIN -->
<div class="card" id="loginBox">
  <h3>üîê Login</h3>

  <div class="label">
    Username: <b>Sabill</b>
  </div>

  <input type="password" id="password" placeholder="Masukkan password">
  <button onclick="login()">Masuk</button>
</div>

<!-- PANEL -->
<div class="card" id="panel" style="display:none">
  <h3>‚ûï Tambah Nomor</h3>
  <input type="text" id="number" placeholder="628xxxxxxxxxx">
  <button onclick="add()">Simpan</button>

  <div class="list" id="list"></div>
</div>

<script>
let SESSION = false

async function login(){
  const p = password.value

  const r = await fetch("/api/numbers",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({
      action:"login",
      password:p
    })
  })

  const j = await r.json()
  if(!j.success) return alert("Password salah")

  SESSION = true
  loginBox.style.display="none"
  panel.style.display="block"
  load()
}

async function load(){
  const r = await fetch("/api/numbers")
  const d = await r.json()

  list.innerHTML=""
  d.forEach((n,i)=>{
    list.innerHTML += `<div class="item">#${i+1} ${n}</div>`
  })
}

async function add(){
  if(!SESSION || !number.value) return

  await fetch("/api/numbers",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({
      action:"add",
      number:number.value
    })
  })

  number.value=""
  load()
}
</script>

</body>
</html>
